server {
  listen 80;

  root /usr/share/nginx/html;
  index index.html;

  # Angular SPA â€” serve static files, fallback to index.html
  location / {
    try_files $uri $uri/ /index.html;
  }

  # Reverse proxy to PHP-FPM for /api/*
  # Maps /api/productos.php -> /var/www/html/public/productos.php
  location ~ ^/api(/.*\.php)$ {
    include fastcgi_params;
    fastcgi_pass backend:9000;
    fastcgi_param SCRIPT_FILENAME /var/www/html/public$1;
    fastcgi_param PATH_INFO $1;
  }
}
